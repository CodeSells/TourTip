(function(n,t,i){function it(t){return n.extend({parentScroll:n("body"),title:"",description:"",position:"bottom",externalContent:undefined,externalContentHtml:"",closeIcon:!0,nextButtonText:"Next",previousButtonText:"Previous",closeButtonText:"Close",next:!0,previous:!1,close:!1,width:"300px",height:"auto",autoNextInterval:0,repeatIcon:!1,animation:"fade",smoothScroll:!0,onShow:!1,onHide:!1,onClose:!1,onNext:!1,onPrevious:!1,onStart:!1},t)}function p(n){return{isFree:typeof n=="undefined"}}function rt(){n(r).each(function(t,i){var f,s="",h="",e=" TourTipBottomNub",o=it({}),c,r;o=n.extend(o,l);i.tipSettings=n.extend(o,i.tipSettings);i.tipProperties.isFree?(s=" FreeTourTip",h=" FreeContentTourTip",f="fixed"):f=n(i.tipObject).css("position")=="fixed"?"fixed":i.tipSettings.parentScroll.is("body")||i.tipSettings.parentScroll.css("position")!="fixed"?"absolute":"fixed";switch(i.tipSettings.position){case"top":e=" TourTipTopNub";break;case"left":e=" TourTipLeftNub";break;case"right":e=" TourTipRightNub"}c='<div class="TourTipCover TourTipTransitOpacity" id="TourTipCover'+t.toString()+'" style="position: '+f+';"><\/div>';r='<div class="TourTip TourTipTransitOpacity'+s+'" id="TourTip'+t.toString()+'" style="position: '+f+';">';i.tipSettings.closeIcon==!0&&(r+='<div class="TourTipCloseIcon" onclick="$.tourTip.close();"><\/div>');r+='<div class="TourTipContent'+h+'" style="width: '+i.tipSettings.width+";height: "+i.tipSettings.height+';">';r+='<p class="TourTipTitle">'+i.tipSettings.title+"<\/p>";r+='<p class="TourTipDesc">'+i.tipSettings.description+"<\/p>";i.tipSettings.externalContentHtml.length>0?r+='<div class="TourTipExternalContent">'+i.tipSettings.externalContentHtml+"<\/div>":i.tipSettings.externalContent!=undefined&&(r+='<div class="TourTipExternalContent">'+i.tipSettings.externalContent.html()+"<\/div>");i.tipProperties.isFree||(r+='<div class="TourTipNub'+e+'"><\/div>');r+=ut(t);r+="<\/div><\/div>";n("body").append(r);i.tipProperties.isFree||n("body").append(c);u=t;k(!0)});u=-1}function ut(n){var t='<div class="TourTipButtonsHolder">';return n>0&&r[n].tipSettings.previous==!0&&(t+='<button class="TourTipButton TourTipPreviousBotton" onclick="$.tourTip.previous();">'+r[n].tipSettings.previousButtonText+"<\/button>"),n<r.length-1&&r[n].tipSettings.next==!0&&(t+='<button class="TourTipButton TourTipNextBotton" onclick="$.tourTip.next();">'+r[n].tipSettings.nextButtonText+"<\/button>"),r[n].tipSettings.close==!0&&(t+='<button class="TourTipButton TourTipCloseBotton" onclick="$.tourTip.close();">'+r[n].tipSettings.closeButtonText+"<\/button>"),t+"<\/div>"}function ft(){n(".TourTip").remove();n(".TourTipDisabledArea").remove();u=-1}function s(t){n.isFunction(t)&&t.call(undefined,e())}function a(t){t>=0&&t<r.length&&u!=t&&(w(),u=t,s(r[t].tipSettings.onShow),v(!1,t,!1),n("#TourTip"+t.toString()).css("display","block"),r[t].tipProperties.isFree||n("#TourTipCover"+t.toString()).css("display","block"),k())}function w(){u>=0&&(s(r[u].tipSettings.onHide),v(!1,u,!0))}function e(){return n("#TourTip"+u.toString())}function et(){return r[u].tipProperties.isFree?undefined:n("#TourTipCover"+u.toString())}function b(i){var o=e(),h=et(),f=n(r[u].tipObject),l=r[u].tipSettings,c=l.position,s=n(f).css("position")=="fixed"||n(f).parent().css("position")=="fixed"||l.parentScroll.css("position")=="fixed";r[u].tipProperties.isFree?d():(c=="top"?(o.css("left",f.offset().left-(s?n(t).scrollLeft():0)),o.css("top",f.offset().top-(s?n(t).scrollTop():0)-o.outerHeight()-10)):c=="left"?(o.css("left",f.offset().left-(s?n(t).scrollLeft():0)-o.width()-10),o.css("top",f.offset().top-(s?n(t).scrollTop():0))):c=="right"?(o.css("left",f.offset().left-(s?n(t).scrollLeft():0)+f.outerWidth()+10),o.css("top",f.offset().top-(s?n(t).scrollTop():0))):(o.css("left",f.offset().left-(s?n(t).scrollLeft():0)),o.css("top",f.offset().top-(s?n(t).scrollTop():0)+f.outerHeight()+10)),h.css("left",f.offset().left-(s?n(t).scrollLeft():0)),h.css("top",f.offset().top-(s?n(t).scrollTop():0)),h.css("width",f.outerWidth()),h.css("height",f.outerHeight()));i||v(!0,u,!0)}function v(t,i){var u=r[i].tipProperties.isFree,f=r[i].tipSettings.animation;if(t)switch(f){case"none":break;case"fade":default:n("#TourTip"+i.toString()).css("opacity","1");u||n("#TourTipCover"+i.toString()).css("opacity",".6")}else{switch(f){case"none":break;case"fade":default:n("#TourTip"+i.toString()).css("opacity","0");u||n("#TourTipCover"+i.toString()).css("opacity","0")}n("#TourTip"+i.toString()).css("display","none");n("#TourTipCover"+i.toString()).css("display","none")}}function k(t){var i,f;t=typeof t!="undefined"?t:!1;i=n(r[u].tipObject);t?b(t):(r[u].tipProperties.isFree?d():ht(),f=setInterval(function(){n(i).parents().is(":animated")||n(i).is(":animated")||(clearInterval(f),b())},200))}function d(){g(e())}function ot(){return u!=-1&&r[u].tipProperties.isFree}function g(t){t.css("left",n(i).width()/2-t.outerWidth()/2);t.css("top",n(i).height()/2-t.outerHeight()/2)}function nt(t){return h.browser=="Firefox"||h.browser=="Mozilla"||h.browser=="Explorer"?n("html, body"):t}function st(){var t,c=n(r[u].tipObject),s=n(r[u].tipSettings.parentScroll),e=new Array(s),h=r[u].tipSettings.animation,i;for(s.parents().each(function(n,t){e.push(t)}),i=0;i<e.length;i++)if(obj=e[i],t=n(obj).parent(),i<e.length-2&&n(obj).css("position")!="fixed"&&t.length>0&&(t.is("body")||t.is("html")?(t=nt(t),h=="none"?(t.scrollTop(n(obj).position().top-20+f(n(obj))),t.scrollLeft(n(obj).position().left-20+o(n(obj)))):t.animate({scrollTop:n(obj).position().top-20+f(n(obj)),scrollLeft:n(obj).position().left-20+o(n(obj))})):h=="none"?(t.scrollTop(n(obj).position().top-20+f(n(obj))),t.scrollLeft(n(obj).position().left-20+o(n(obj)))):t.animate({scrollTop:n(obj).position().top-20+f(n(obj)),scrollLeft:n(obj).position().left-20+o(n(obj))})),n(obj).css("position")=="fixed")return!1}function ht(){var s=n(r[u].tipObject),l=r[u].tipSettings,t,p=s.parents(),a=l.smoothScroll,h,v,y;s.css("position")!="fixed"&&(st(),h=s.position(),t=l.parentScroll,t.is("body")||t.is("html")?(t=nt(t),v=l.position!="bottom"?0:e().outerHeight(),y=l.position!="right"?0:e().outerWidth(),l.position=="top"?(h.top+f(s)-e().outerHeight()<t.scrollTop()||h.top+s.outerHeight()-c(s)+v>n(i).height())&&(a==!1?t.scrollTop(h.top-5-e().outerHeight()):t.animate({scrollTop:h.top-5-e().outerHeight()})):(h.top+f(s)<t.scrollTop()||h.top+s.outerHeight()-c(s)+v>n(i).height())&&(a==!1?t.scrollTop(h.top-20+f(s)):t.animate({scrollTop:h.top-20+f(s)})),(h.left+o(s)<t.scrollLeft()||h.left+s.outerWidth()-tt(s)+y>n(i).width())&&(a==!1?t.scrollLeft(h.left-20+o(s)):t.animate({scrollLeft:h.left-20+o(s)}))):(l.position=="top"?(h.top+f(s)<0||h.top+s.outerHeight()-c(s)>t.outerHeight())&&(a==!1?t.scrollTop(h.top-5-e().outerHeight()):t.animate({scrollTop:h.top-5-e().outerHeight()})):(h.top+f(s)<t.scrollTop()||h.top+s.outerHeight()-c(s)+t.scrollTop()>t.outerHeight())&&(a==!1?t.scrollTop(h.top-20+f(s)+t.scrollTop()):t.animate({scrollTop:h.top-20+f(s)+t.scrollTop()})),(h.left+o(s)<t.scrollLeft()||h.left+s.outerWidth()-tt(s)+t.scrollLeft()>t.outerWidth())&&(a==!1?t.scrollLeft(h.left-20+o(s)+t.scrollLeft()):t.animate({scrollLeft:h.left-20+o(s)+t.scrollLeft()}))))}function ct(){n("body").append('<canvas id="TourTipDisabledArea" class="TourTipDisabledArea"><\/canvas>');n(i).resize(function(){n(".TourTipDisabledArea").css("width",n(i).width().toString()+"px");n(".TourTipDisabledArea").css("height",n(i).height().toString()+"px")}).resize()}function lt(){n(".TourTipDisabledArea").css("display","block")}function o(t){return parseInt(n(t).css("margin-left").replace("px",""),10)}function tt(t){return parseInt(n(t).css("margin-right").replace("px",""),10)}function f(n){return parseInt(n.css("margin-top").replace("px",""),10)}function c(t){return parseInt(n(t).css("margin-bottom").replace("px",""),10)}var r=[],y="tourTip",u=-1,l,h={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(n){for(var i,r,t=0;t<n.length;t++)if(i=n[t].string,r=n[t].prop,this.versionSearchString=n[t].versionSearch||n[t].identity,i){if(i.indexOf(n[t].subString)!=-1)return n[t].identity}else if(r)return n[t].identity},searchVersion:function(n){var t=n.indexOf(this.versionSearchString);if(t!=-1)return parseFloat(n.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:i.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};(h.init(),n.tourTip)||(publicMethod=n.fn[y]=n[y]=function(n){var t=n;return this.each(function(n,i){r.push({tipObject:i,tipSettings:t,tipProperties:p(i)})})},publicMethod.create=function(n){var t=n;r.push({tipObject:undefined,tipSettings:t,tipProperties:p(undefined)})},publicMethod.start=function(t){r.length>0&&(l=n.extend({},t),s(l.onStart),ct(),rt(),lt(),a(0))},publicMethod.next=function(){s(r[u].tipSettings.onNext);a(u+1)},publicMethod.previous=function(){s(r[u].tipSettings.onPrevious);a(u-1)},publicMethod.close=function(){w();s(r[u].tipSettings.onClose);ft()},n(i).resize(function(){ot()&&g(e())}))})(jQuery,document,window);